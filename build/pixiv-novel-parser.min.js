!function(a){var b="process"in a,c=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(){return a.substring(hc,gc)}function d(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return ic!==b&&(ic>b&&(ic=0,jc={line:1,column:1,seenCR:!1}),c(jc,ic,b),ic=b),jc}function e(a){kc>gc||(gc>kc&&(kc=gc,lc=[]),lc.push(a))}function f(c,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=d(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==c?c:h(e,j),e,j,f,i.line,i.column)}function g(){var a;return a=h()}function h(){var a,b;for(a=[],b=j(),b===L&&(b=i());b!==L;)a.push(b),b=j(),b===L&&(b=i());return a}function i(){var b,c,d,f,g,h,i;if(b=gc,c=gc,d=[],f=[],P.test(a.charAt(gc))?(g=a.charAt(gc),gc++):(g=L,0===mc&&e(Q)),g!==L)for(;g!==L;)f.push(g),P.test(a.charAt(gc))?(g=a.charAt(gc),gc++):(g=L,0===mc&&e(Q));else f=O;if(f===L&&(f=gc,g=gc,mc++,h=gc,mc++,i=j(),mc--,i===L?h=R:(gc=h,h=O),mc--,h!==L?(gc=g,g=R):g=O,g!==L?(91===a.charCodeAt(gc)?(h=S,gc++):(h=L,0===mc&&e(T)),h!==L?(g=[g,h],f=g):(gc=f,f=O)):(gc=f,f=O)),f!==L)for(;f!==L;){if(d.push(f),f=[],P.test(a.charAt(gc))?(g=a.charAt(gc),gc++):(g=L,0===mc&&e(Q)),g!==L)for(;g!==L;)f.push(g),P.test(a.charAt(gc))?(g=a.charAt(gc),gc++):(g=L,0===mc&&e(Q));else f=O;f===L&&(f=gc,g=gc,mc++,h=gc,mc++,i=j(),mc--,i===L?h=R:(gc=h,h=O),mc--,h!==L?(gc=g,g=R):g=O,g!==L?(91===a.charCodeAt(gc)?(h=S,gc++):(h=L,0===mc&&e(T)),h!==L?(g=[g,h],f=g):(gc=f,f=O)):(gc=f,f=O))}else d=O;return d!==L&&(d=a.substring(c,gc)),c=d,c!==L&&(hc=b,c=U(c)),b=c}function j(){var a;return a=k(),a===L&&(a=l(),a===L&&(a=m(),a===L&&(a=n(),a===L&&(a=o())))),a}function k(){var b,c,d;return b=gc,a.substr(gc,9)===V?(c=V,gc+=9):(c=L,0===mc&&e(W)),c!==L?(d=x(),d===L&&(d=X),d!==L?(hc=b,c=Y(),b=c):(gc=b,b=O)):(gc=b,b=O),b}function l(){var b,c,d,f;return b=gc,a.substr(gc,9)===Z?(c=Z,gc+=9):(c=L,0===mc&&e($)),c!==L?(d=p(),d!==L?(93===a.charCodeAt(gc)?(f=_,gc++):(f=L,0===mc&&e(ab)),f!==L?(hc=b,c=bb(d),b=c):(gc=b,b=O)):(gc=b,b=O)):(gc=b,b=O),b}function m(){var b,c,d,f,g,h;return b=gc,a.substr(gc,12)===cb?(c=cb,gc+=12):(c=L,0===mc&&e(db)),c!==L?(d=r(),d!==L?(f=gc,45===a.charCodeAt(gc)?(g=eb,gc++):(g=L,0===mc&&e(fb)),g!==L?(h=s(),h!==L?(g=[g,h],f=g):(gc=f,f=O)):(gc=f,f=O),f===L&&(f=X),f!==L?(93===a.charCodeAt(gc)?(g=_,gc++):(g=L,0===mc&&e(ab)),g!==L?(hc=b,c=gb(d,f),b=c):(gc=b,b=O)):(gc=b,b=O)):(gc=b,b=O)):(gc=b,b=O),b}function n(){var b,c,d,f;return b=gc,a.substr(gc,6)===hb?(c=hb,gc+=6):(c=L,0===mc&&e(ib)),c!==L?(d=s(),d!==L?(93===a.charCodeAt(gc)?(f=_,gc++):(f=L,0===mc&&e(ab)),f!==L?(hc=b,c=jb(d),b=c):(gc=b,b=O)):(gc=b,b=O)):(gc=b,b=O),b}function o(){var b,c,d,f,g,h,i,j;if(b=gc,a.substr(gc,10)===kb?(c=kb,gc+=10):(c=L,0===mc&&e(lb)),c!==L)if(d=q(),d!==L)if(62===a.charCodeAt(gc)?(f=mb,gc++):(f=L,0===mc&&e(nb)),f!==L){for(g=[],h=D();h!==L;)g.push(h),h=D();if(g!==L)if(h=t(),h!==L){for(i=[],j=D();j!==L;)i.push(j),j=D();i!==L?(a.substr(gc,2)===ob?(j=ob,gc+=2):(j=L,0===mc&&e(pb)),j!==L?(hc=b,c=qb(d,h),b=c):(gc=b,b=O)):(gc=b,b=O)}else gc=b,b=O;else gc=b,b=O}else gc=b,b=O;else gc=b,b=O;else gc=b,b=O;return b}function p(){var b,c,d,f;for(b=gc,c=gc,d=[],rb.test(a.charAt(gc))?(f=a.charAt(gc),gc++):(f=L,0===mc&&e(sb));f!==L;)d.push(f),rb.test(a.charAt(gc))?(f=a.charAt(gc),gc++):(f=L,0===mc&&e(sb));return d!==L&&(d=a.substring(c,gc)),c=d,c!==L&&(hc=b,c=tb(c)),b=c}function q(){var b,c,d,f;for(b=gc,c=gc,d=[],ub.test(a.charAt(gc))?(f=a.charAt(gc),gc++):(f=L,0===mc&&e(vb));f!==L;)d.push(f),ub.test(a.charAt(gc))?(f=a.charAt(gc),gc++):(f=L,0===mc&&e(vb));return d!==L&&(d=a.substring(c,gc)),c=d,c!==L&&(hc=b,c=tb(c)),b=c}function r(){var b,c,d;if(b=gc,c=[],d=y(),d!==L)for(;d!==L;)c.push(d),d=y();else c=O;return c!==L&&(c=a.substring(b,gc)),b=c}function s(){var b,c,d,e;if(b=gc,c=gc,d=[],e=y(),e!==L)for(;e!==L;)d.push(e),e=y();else d=O;return d!==L&&(d=a.substring(c,gc)),c=d,c!==L&&(hc=b,c=wb(c)),b=c}function t(){var b,c,d,f,g,h,i;if(b=gc,c=gc,d=gc,f=gc,a.substr(gc,4)===xb?(g=xb,gc+=4):(g=L,0===mc&&e(yb)),g!==L?(115===a.charCodeAt(gc)?(h=zb,gc++):(h=L,0===mc&&e(Ab)),h===L&&(h=X),h!==L?(g=[g,h],f=g):(gc=f,f=O)):(gc=f,f=O),f===L&&(f=X),f!==L)if(a.substr(gc,3)===Bb?(g=Bb,gc+=3):(g=L,0===mc&&e(Cb)),g!==L){for(h=[],i=u();i!==L;)h.push(i),i=u();h!==L?(f=[f,g,h],d=f):(gc=d,d=O)}else gc=d,d=O;else gc=d,d=O;return d!==L&&(d=a.substring(c,gc)),c=d,c!==L&&(hc=b,c=Db(c)),b=c}function u(){var b,c,d,f;if(b=v(),b===L&&(b=y(),b===L)){if(b=gc,37===a.charCodeAt(gc)?(c=Eb,gc++):(c=L,0===mc&&e(Fb)),c!==L){if(d=[],f=z(),f!==L)for(;f!==L;)d.push(f),f=z();else d=O;d!==L?(c=[c,d],b=c):(gc=b,b=O)}else gc=b,b=O;b===L&&(Gb.test(a.charAt(gc))?(b=a.charAt(gc),gc++):(b=L,0===mc&&e(Hb)))}return b}function v(){var b;return Ib.test(a.charAt(gc))?(b=a.charAt(gc),gc++):(b=L,0===mc&&e(Jb)),b===L&&(Kb.test(a.charAt(gc))?(b=a.charAt(gc),gc++):(b=L,0===mc&&e(Lb))),b}function w(){var b;return 13===a.charCodeAt(gc)?(b=Mb,gc++):(b=L,0===mc&&e(Nb)),b}function x(){var a,b,c;return a=gc,b=w(),b!==L?(c=B(),c!==L?(b=[b,c],a=b):(gc=a,a=O)):(gc=a,a=O),a}function y(){var b;return Ob.test(a.charAt(gc))?(b=a.charAt(gc),gc++):(b=L,0===mc&&e(Pb)),b}function z(){var b;return b=y(),b===L&&(65===a.charCodeAt(gc)?(b=Qb,gc++):(b=L,0===mc&&e(Rb)),b===L&&(66===a.charCodeAt(gc)?(b=Sb,gc++):(b=L,0===mc&&e(Tb)),b===L&&(67===a.charCodeAt(gc)?(b=Ub,gc++):(b=L,0===mc&&e(Vb)),b===L&&(68===a.charCodeAt(gc)?(b=Wb,gc++):(b=L,0===mc&&e(Xb)),b===L&&(69===a.charCodeAt(gc)?(b=Yb,gc++):(b=L,0===mc&&e(Zb)),b===L&&(70===a.charCodeAt(gc)?(b=$b,gc++):(b=L,0===mc&&e(_b)))))))),b}function A(){var b;return 9===a.charCodeAt(gc)?(b=ac,gc++):(b=L,0===mc&&e(bc)),b}function B(){var b;return 10===a.charCodeAt(gc)?(b=cc,gc++):(b=L,0===mc&&e(dc)),b}function C(){var b;return 32===a.charCodeAt(gc)?(b=ec,gc++):(b=L,0===mc&&e(fc)),b}function D(){var a;return a=C(),a===L&&(a=A()),a}function c(a){return{type:"text",val:a}}function E(){return{type:"tag",name:"newpage"}}function F(a){return{type:"tag",name:"chapter",title:a}}function G(a,b){return{type:"tag",name:"pixivimage",illustID:a,pageNumber:b||null}}function H(a){return{type:"tag",name:"jump",pageNumber:a}}function I(a,b){return{type:"tag",name:"jumpuri",title:a,uri:b}}var J,K=arguments.length>1?arguments[1]:{},L={},M={start:g},N=g,O=L,P=/^[^[]/,Q={type:"class",value:"[^[]",description:"[^[]"},R=void 0,S="[",T={type:"literal",value:"[",description:'"["'},U=function(a){return c(a)},V="[newpage]",W={type:"literal",value:"[newpage]",description:'"[newpage]"'},X=null,Y=function(){return E()},Z="[chapter:",$={type:"literal",value:"[chapter:",description:'"[chapter:"'},_="]",ab={type:"literal",value:"]",description:'"]"'},bb=function(a){return F(a)},cb="[pixivimage:",db={type:"literal",value:"[pixivimage:",description:'"[pixivimage:"'},eb="-",fb={type:"literal",value:"-",description:'"-"'},gb=function(a,b){return G(a,b&&b[1])},hb="[jump:",ib={type:"literal",value:"[jump:",description:'"[jump:"'},jb=function(a){return H(a)},kb="[[jumpuri:",lb={type:"literal",value:"[[jumpuri:",description:'"[[jumpuri:"'},mb=">",nb={type:"literal",value:">",description:'">"'},ob="]]",pb={type:"literal",value:"]]",description:'"]]"'},qb=function(a,b){return I(a,b)},rb=/^[^\]]/,sb={type:"class",value:"[^\\]]",description:"[^\\]]"},tb=function(a){return a.trim()},ub=/^[^>]/,vb={type:"class",value:"[^>]",description:"[^>]"},wb=function(a){return parseInt(a,10)},xb="http",yb={type:"literal",value:"http",description:'"http"'},zb="s",Ab={type:"literal",value:"s",description:'"s"'},Bb="://",Cb={type:"literal",value:"://",description:'"://"'},Db=function(a){return a},Eb="%",Fb={type:"literal",value:"%",description:'"%"'},Gb=/^[\-._~!$&'()*+,;=:\/@.?#]/,Hb={type:"class",value:"[\\-._~!$&'()*+,;=:\\/@.?#]",description:"[\\-._~!$&'()*+,;=:\\/@.?#]"},Ib=/^[A-Z]/,Jb={type:"class",value:"[A-Z]",description:"[A-Z]"},Kb=/^[a-z]/,Lb={type:"class",value:"[a-z]",description:"[a-z]"},Mb="\r",Nb={type:"literal",value:"\r",description:'"\\r"'},Ob=/^[0-9]/,Pb={type:"class",value:"[0-9]",description:"[0-9]"},Qb="A",Rb={type:"literal",value:"A",description:'"A"'},Sb="B",Tb={type:"literal",value:"B",description:'"B"'},Ub="C",Vb={type:"literal",value:"C",description:'"C"'},Wb="D",Xb={type:"literal",value:"D",description:'"D"'},Yb="E",Zb={type:"literal",value:"E",description:'"E"'},$b="F",_b={type:"literal",value:"F",description:'"F"'},ac="	",bc={type:"literal",value:"	",description:'"\\t"'},cc="\n",dc={type:"literal",value:"\n",description:'"\\n"'},ec=" ",fc={type:"literal",value:" ",description:'" "'},gc=0,hc=0,ic=0,jc={line:1,column:1,seenCR:!1},kc=0,lc=[],mc=0;if("startRule"in K){if(!(K.startRule in M))throw Error("Can't start parsing from rule \""+K.startRule+'".');N=M[K.startRule]}if(J=N(),J!==L&&gc===a.length)return J;throw J!==L&&gc<a.length&&e({type:"end",description:"end of input"}),f(null,lc,kc)}return a(b,Error),{SyntaxError:b,parse:c}}();b?module.exports=c:(a.PixivNovelParser=a.PixivNovelParser||{},a.PixivNovelParser.parser=c)}((this||0).self||global),function(a){"use strict";function b(){this.tree=[]}var c,d="process"in a;c=d?require("./parser.peg.js"):PixivNovelParser.parser,b.parse=function(a){try{return a=a.replace(/\r?\n/g,"\n").replace(/[\s\u200c]/g,function(a){return"\n"===a||"ã€€"===a?a:" "}),c.parse(a)}catch(b){return console.error(b),[{type:"text",val:a}]}},b.prototype.parse=function(a){return this.tree=b.parse(a),this},b.prototype.toJSON=function(){return JSON.stringify(this.tree)},d?module.exports=b:(a.PixivNovelParser=a.PixivNovalPerser||{},a.PixivNovelParser.Parser=b)}((this||0).self||global),function(a){"use strict";var b="process"in a;b?module.exports=require("./parser"):a.PixivNovelParser=a.PixivNovelParser||{}}((this||0).self||global);
//# sourceMappingURL=pixiv-novel-parser.min.js.map